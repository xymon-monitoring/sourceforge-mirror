README file for bbgen version 1.0
=================================

bbgen is a drop-in replacement for the bb-display.sh script that 
ships with the Big Brother monitoring tool.

bbgen is Copyright (C) 2002, Henrik Storner <henrik@storner.dk>
It is released under the GNU General Public License, version 2.


Features
--------

The main feature of bbgen is speed. My BB installation currently
has about 250 hosts, spread over 50 pages and subpages. The time
to generate the pages with bb-display.sh was about 12 minutes;
bbgen does it in less than 5 seconds.

The pages generated by bbgen should be similar to what you get
with bb-display.sh from BB version 1.9c.


Requirements
------------

A working Big Brother installation. Get BB up and running first,
then you can drop in bbgen to speed up things.


Installation
------------

Compile bbgen. It has been compiled with gcc 2.95.3 on both
Solaris (2.8) and Linux (Red Hat 7.3). Other compilers may
require some tweaking - I don't know. Normally, it should
be as simple as running "make".

Put the bbgen executable in $BBHOME/bin/

To test bbgen, su to the account that you run bb as on your
BB display server. Make sure to setup ALL of the environment
variables that BB uses:

	BBHOME=/path/to/BB/home
	export BBHOME
	. $BBHOME/etc/bbdef.sh

Then you can run bbgen and have a look at the webpages it generates.

If you want bbgen to put the pages it generates into a different
directory than your production pages, you can run it like this:

	BBWEB=/bbtest $BBHOME/bin/bbgen /path/to/webroot/bbtest

This puts the webpages into "bbtest/" below your webservers'
webroot. The "BBWEB=/bbtest" is needed to have the proper 
URL's generated that link to "/bbtest".


When you feel confident that bbgen works, change $BBHOME/runbb.sh
to run "bbgen" instead of "bb-display.sh".


Limitations
-----------

The following features in bb-display.sh are not currently implemented
in bbgen:

* "group-only" and "group" directives in bb-hosts are handled as 
  "group-compress". "group-only" will be handled in a later version,
  but I currently have no plans to support the simple "group"
  directive.

* Modem banks are not handled at all by bbgen. This directive
  is simply ignored.

* The bb2.html page does not currently include the acknowledgement
  log.


Bugs
----

bbgen is very new. It is currently in use on two systems I run:
One very large installation, and one very small installation.
It works for me, and I think I have taken care of all the 
little details, but do not be surprised if it crashes when you
try to run it.

The first thing you should check is, if you have all of the BB
environment variables setup (see "Installation") - if any of 
these are not defined, you will most likely see bbgen crash
with a segfault.

Also check that you have write access to the directory, where
you try to store the generated webpages.

If it still fails, feel free to debug the problem and send me
patches :-) Or if your C coding is a bit rusty, e-mail we and
I'll see if I can help you track down the problem. I will 
probably need a copy of the contents of your bb-hosts file,
and the contents of the bbvar/logs/ directory:

	tar cvf /tmp/bbgendata.tar $BBHOSTS $BBLOGS/
	gzip /tmp/bbgendata.tar


Planned improvements
--------------------

See the "TODO" file.



Henrik Storner <henrik@storner.dk>
Nov 26, 2002

