head	1.1;
access;
symbols;
locks
	tjyang:1.1; strict;
comment	@# @;


1.1
date	2010.03.06.00.21.47;	author tjyang;	state Exp;
branches;
next	;


desc
@init,aty010
@


1.1
log
@Initial revision
@
text
@#----------------------------------------------------------------------------#
#     G N U    A U T O T O O L     S P E C I F I C A T I O N                 #
#----------------------------------------------------------------------------#
#                                                                            #
# NAME                                                                       # 
# configure.ac  used by bootstrap.sh                                         #
#                                                                            #
# REVISION HISTORY							     #
#     03/04/2010    T.J. Yang   				             #
#									     #
#                                                                            #
# USAGE								             #
#                                                                            #
# DESCRIPTION								     #
#                                                                            # 
#									     #
# RETURN CODE								     #
#   SUCCESS (=0) - function completed sucessfully			     #
#   ERROR   (=1) - error. 						     #
#   WARNING (=2) - warning... something's not quite right, but it's	     #
#                      not serious enough to prevent installation.	     #
#									     #
# LICENSE 								     #
# This program is released under the GNU General Public License (GPL),       #
# version 2. See the file "COPYING" for details.                             #
#									     #
#									     #
# COPYRIGHT                                                                  #
# Copyright (C) 2005-2008 Henrik Storner <henrik@@hswn.dk>                    #
#									     #
#									     #
# ------------------------ HEADER  FILE DECLARATION -------------------------#
#									     #


AC_INIT([xymon], [4.3.0], [tjyang2001@@gmail.com])
#Clear scrren
clear
# issue a welcome message
AC_MSG_NOTICE([Configuring Xymon using GNU Autotool.])

# Take augument of client or server.
AC_ARG_WITH(comp-mode,[ --with-comp-mode=<mode>
Specify a compilation mode: client or server],
[comp_mode=$withval],[comp_mode=client])

case "$comp_mode" in
    client)
    CFLAGS=-g 
    ;;
    server | * )
    CFLAGS=-O
    ;;
esac

# ------------------------ HEADER  FILE DECLARATION ------------------------- #
# 
AC_PREREQ([2.61])
AC_CONFIG_SRCDIR([lib/files.c])
AC_CONFIG_SRCDIR([client/clientupdate.c])
# ------------------------ HEADER  FILE DECLARATION ------------------------- #
AC_CONFIG_AUX_DIR([build-aux])
# Define a directory to hold M4 macros scripts.
AC_CONFIG_MACRO_DIR([m4])
# This is AutoMake macro, we pass on following error messages to automake.
AM_INIT_AUTOMAKE([-Wall -Werror foreign])
#
AC_PROG_CC
# We want to use libtool for compiling and linking 
AC_PROG_LIBTOOL
# Checking Needed Headers
AC_CHECK_HEADER(unistd.h)
AC_CHECK_HEADER(errno.h)
AC_CHECK_HEADER(rrd.h)
AC_CHECK_HEADER(sys/select.h)
#
AC_CHECK_LIB(rt,clock_gettime)
AC_CHECK_LIB(rrd,rrd_clear_error)


if test "$ac_cv_header_rt_h" == yes
then
	AC_MSG_WARN([Great, We have library realtime for clock_gettime!])
fi
#
AC_CHECK_LIB(pcre,pcre_free)
# All the checking will insert into config.h
AC_CONFIG_HEADERS([config.h])
#
AC_CONFIG_FILES([Makefile 
lib/Makefile 
common/Makefile 
client/Makefile 
demotool/Makefile 
bbdisplay/Makefile 
bbproxy/Makefile 
hobbitd/Makefile])
# ------------------------ HEADER  FILE DECLARATION -------------------------#
# What: The last macro to generate all the above Makefiles.
AC_OUTPUT


@
